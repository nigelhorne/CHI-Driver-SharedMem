#!/usr/bin/env perl

use CHI;
use Data::Dumper;

my $cache = CHI->new(driver => 'SharedMem', shmkey => 98766789);

foreach my $n ($cache->get_namespaces()) {
	print "$n:\n";

	$cache = CHI->new(driver => 'SharedMem', shmkey => 98766789, namespace => $n);

	foreach my $key($cache->get_keys($n)) {
		print "\t$key: ", $cache->is_valid($key), "\n";
		# my $value = $cache->get($key);
		# print $value;
		my $object = $cache->get_object();
		print Data::Dumper->new([$object])->Dump();
	}
}
